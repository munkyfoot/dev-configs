# --- Welcome banner ---
# Prints a friendly banner once per interactive shell.
# - Chooses ASCII art and color based on time of day
# - Uses custom ASCII art or converts custom images to ASCII art if available
# - Shows Node and Python versions when available
# Set `WELCOME_USER_NAME` to override the greeting name.
# Set `WELCOME_IMAGES_DIR` to specify custom art/image directory.
# Add `morning.txt`/`afternoon.txt`/`evening.txt` or `custom.txt` alongside images.
# To disable, skip sourcing this file or unset `_WELCOME_PRINTED`.

# Get the absolute directory where this script is located
typeset -g _WELCOME_SCRIPT_DIR="${_WELCOME_SCRIPT_DIR:-${${(%):-%x}:A:h}}"

# Shared helpers
typeset -g DC_SHARED_DIR="${DC_SHARED_DIR:-${_WELCOME_SCRIPT_DIR}/../shared}"
source "${DC_SHARED_DIR}/img2ascii.sh"
source "${DC_SHARED_DIR}/welcome.sh"

if [[ $- == *i* ]]; then
  # Guard so sourcing .zshrc twice doesn't reprint
  if [[ -z "${_WELCOME_PRINTED:-}" ]]; then
    _WELCOME_PRINTED=1
    dc_welcome_banner "$_WELCOME_SCRIPT_DIR"
  fi
fi
# --- end ---
